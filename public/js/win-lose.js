(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"8Mbc":function(t,e,s){"use strict";s.r(e);var a={data:function(){return{winloseItems:{data:[]},rows_fields:[{key:"#",thStyle:{width:"40px"},class:"text-center"},{key:"name",sortable:!0,label:this.trans("report.winlose_name"),thClass:"text-center"},{key:"currency",label:this.trans("common.currency"),class:"table-col-cur"},{key:"player",label:this.trans("report.player"),thClass:"text-center",class:"text-right",thStyle:{minWidth:"70px"}},{key:"ticket",label:this.trans("report.tickets"),thClass:"text-center",class:"text-right"},{key:"bet",label:this.trans("report.bet"),thClass:"text-center",class:"table-col-num"},{key:"payout",label:this.trans("report.payout"),thClass:"text-center",class:"table-col-num"},{key:"win",label:this.trans("report.win"),thClass:"text-center",class:"table-col-num"},{key:"margin",label:this.trans("report.margin"),thClass:"text-center",class:"text-right"},{key:"type",label:this.trans("report.type"),thClass:"text-center"}],footer_fields:[{key:"#",thStyle:{width:"40px"},class:"text-center"},{key:"currency",label:this.trans("common.currency"),class:"table-col-cur"},{key:"player",label:this.trans("report.player"),thClass:"text-center",class:"text-right",thStyle:{minWidth:"70px"}},{key:"ticket",label:this.trans("report.tickets"),thClass:"text-center",class:"text-right"},{key:"bet",label:this.trans("report.bet"),thClass:"text-center",class:"table-col-num"},{key:"payout",label:this.trans("report.payout"),thClass:"text-center",class:"table-col-num"},{key:"win",label:this.trans("report.win"),thClass:"text-center"},{key:"margin",label:this.trans("report.margin"),thClass:"text-center",class:"text-right"},{key:"type",label:this.trans("report.type"),thClass:"text-center"}],isLoading:!1,searchData:{agent:[],groupby:"agent",startedAt:"",finishedAt:""},agentOptions:this.getJsonData("agent-list")}},mounted:function(){var t=this;this.agentOptions.forEach(function(e){t.searchData.agent.push(e.id)}),this.handleTime("today"),this.searchData.startedAt="2019-07-01",this.search()},methods:{search:function(){var t=this;this.isLoading||(this.isLoading=!0,this.$ajax("POST","/api/report/list/win_lose",this.searchData).then(function(e){t.winloseItems=e,t.isLoading=!1}).catch(function(t){console.error(t)}))},agentOnChange:function(t){var e=this;this.searchData.agent=[];var s=t.target.value;s?this.searchData.agent.push(s):this.agentOptions.forEach(function(t){e.searchData.agent.push(t.id)})},handleTime:function(t){var e=this.getDatetimeRange(t,"yyyy-MM-dd");this.searchData.startedAt=e[0],this.searchData.finishedAt=e[1]}}},r=s("KHd+"),n=Object(r.a)(a,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",[s("list-grid",{attrs:{search:t.search,paginate:!1}},[s("template",{slot:"search-form"},[s("b-input-group",{directives:[{name:"show",rawName:"v-show",value:t.user.isAdmin||t.user.isAdminSub,expression:"user.isAdmin || user.isAdminSub"}],staticClass:"mr-2 mb-1",attrs:{prepend:t.trans("report.agent")}},[s("b-form-select",{attrs:{value:""},nativeOn:{change:function(e){return t.agentOnChange(e)}}},[s("option",{attrs:{value:""}},[t._v(t._s(t.trans("common.all")))]),t._v(" "),t._l(t.agentOptions,function(e){return s("option",{key:e.id,domProps:{value:e.id}},[t._v("\r\n                        "+t._s(e.username)+"\r\n                    ")])})],2)],1),t._v(" "),s("b-input-group",{staticClass:"mr-2 mb-1",attrs:{prepend:t.trans("report.group_by")}},[s("b-form-select",{model:{value:t.searchData.groupby,callback:function(e){t.$set(t.searchData,"groupby",e)},expression:"searchData.groupby"}},[s("option",{attrs:{value:"agent"}},[t._v(t._s(t.trans("report.agent")))]),t._v(" "),s("option",{attrs:{value:"member"}},[t._v(t._s(t.trans("report.member")))]),t._v(" "),s("option",{attrs:{value:"day"}},[t._v(t._s(t.trans("report.day")))]),t._v(" "),s("option",{attrs:{value:"provider"}},[t._v(t._s(t.trans("report.provider")))]),t._v(" "),s("option",{attrs:{value:"game"}},[t._v(t._s(t.trans("report.game")))])])],1),t._v(" "),s("b-input-group",{staticClass:"mr-2 mb-1",attrs:{prepend:t.trans("common.started_at")}},[s("b-form-input",{attrs:{type:"date"},model:{value:t.searchData.startedAt,callback:function(e){t.$set(t.searchData,"startedAt",e)},expression:"searchData.startedAt"}})],1),t._v(" "),s("b-input-group",{staticClass:"mr-2 mb-1",attrs:{prepend:t.trans("common.finished_at")}},[s("b-form-input",{attrs:{type:"date"},model:{value:t.searchData.finishedAt,callback:function(e){t.$set(t.searchData,"finishedAt",e)},expression:"searchData.finishedAt"}})],1),t._v(" "),s("b-input-group",{staticClass:"mr-2 mb-1"},[s("button",{staticClass:"btn btn-outline-primary mr-2",on:{click:function(e){return t.handleTime("today")}}},[t._v(t._s(t.trans("common.today")))]),t._v(" "),s("button",{staticClass:"btn btn-outline-primary mr-2",on:{click:function(e){return t.handleTime("yesterday")}}},[t._v(t._s(t.trans("common.yesterday")))]),t._v(" "),s("button",{staticClass:"btn btn-outline-primary mr-2",on:{click:function(e){return t.handleTime("this_week")}}},[t._v(t._s(t.trans("common.this_week")))]),t._v(" "),s("button",{staticClass:"btn btn-outline-primary",on:{click:function(e){return t.handleTime("this_month")}}},[t._v(t._s(t.trans("common.this_month")))])])],1),t._v(" "),s("template",{slot:"table"},[s("b-table",{attrs:{responsive:"",bordered:"",striped:"",small:"",items:t.winloseItems.data.rows,fields:t.rows_fields,busy:t.isLoading,"show-empty":"","empty-text":t.trans("common.empty-data")},scopedSlots:t._u([{key:"#",fn:function(e){return[t._v("\r\n                    "+t._s(e.index+1)+"\r\n                ")]}},{key:"bet",fn:function(e){return[t._v("\r\n                    "+t._s(t._f("numberFormat")(e.item.bet))+"\r\n                ")]}},{key:"payout",fn:function(e){return[t._v("\r\n                    "+t._s(t._f("numberFormat")(e.item.payout))+"\r\n                ")]}},{key:"win",fn:function(e){return[s("section",{class:"table-col-"+(e.item.win>=0?"greenNum":"redNum")},[t._v("\r\n                        "+t._s(t._f("numberFormat")(e.item.win))+"\r\n                    ")])]}}])},[s("loading",{attrs:{slot:"table-busy"},slot:"table-busy"})],1)],1)],2),t._v(" "),s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body"},[s("b-table",{attrs:{responsive:"",bordered:"",striped:"",small:"",items:t.winloseItems.data.footer,fields:t.footer_fields,busy:t.isLoading,"show-empty":"","empty-text":t.trans("common.empty-data")},scopedSlots:t._u([{key:"#",fn:function(e){return[t._v("\r\n                        "+t._s(e.index+1)+"\r\n                    ")]}},{key:"bet",fn:function(e){return[t._v("\r\n                        "+t._s(t._f("numberFormat")(e.item.bet))+"\r\n                    ")]}},{key:"payout",fn:function(e){return[t._v("\r\n                        "+t._s(t._f("numberFormat")(e.item.payout))+"\r\n                    ")]}},{key:"win",fn:function(e){return[s("section",{class:"table-col-"+(e.item.win>=0?"greenNum":"redNum")},[t._v("\r\n                            "+t._s(t._f("numberFormat")(e.item.win))+"\r\n                        ")])]}}])},[s("loading",{attrs:{slot:"table-busy"},slot:"table-busy"})],1)],1)])])],1)},[],!1,null,null,null);e.default=n.exports}}]);