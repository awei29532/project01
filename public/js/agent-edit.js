(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{XViB:function(a,e,t){"use strict";t.r(e);function r(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})),t.push.apply(t,r)}return t}function s(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}var l={props:{agentid:{required:!0}},data:function(){return{data:{id:this.agentid,username:"",password:"",name:"",remark:"",currency:"",auth_mode:1,callback:"",wallet_mode:0,url_balance:"",url_deposit:"",url_withdrawal:"",url_rollback:"",configs:{}},currencyOptions:this.getJsonData("currency-list"),errors:[],isLoading:!1}},mounted:function(){this.data=function(a){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?r(t,!0).forEach(function(e){s(a,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):r(t).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(t,e))})}return a}({id:this.agentid},this.getJsonData("agent-data"))},methods:{send:function(a){var e=this;if(a.preventDefault(),!this.isLoading){this.isLoading=!0,this.errors=[];var t=0==this.agentid?"/api/accounts/agent/add":"/api/accounts/agent/edit";this.$ajax("POST",t,this.data).then(function(a){location.href="/accounts/agent",e.isLoading=!1}).catch(function(a){if(422==a.response.status){var t=a.response.data.errors;for(var r in t)t[r]=t[r].join(", ");e.errors=t}else console.warn(a)})}},handleErrors:function(a){return void 0===this.errors[a]&&null},cancel:function(){history.back()}}},o=t("KHd+"),n=Object(o.a)(l,function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("section",{staticClass:"container-fluid"},[t("div",{staticClass:"card"},[t("div",{staticClass:"card-body"},[t("form",{on:{submit:a.send}},[t("b-form-group",{attrs:{"label-cols-md":"1",label:a.trans("common.username"),"label-for":"username"}},[t("b-form-input",{attrs:{id:"username",type:"text",state:a.handleErrors("username"),disabled:0!=a.agentid,required:""},model:{value:a.data.username,callback:function(e){a.$set(a.data,"username",e)},expression:"data.username"}}),a._v(" "),t("b-form-invalid-feedback",[a._v("\r\n                        "+a._s(a.errors.username)+"\r\n                    ")])],1),a._v(" "),t("b-form-group",{attrs:{"label-cols-md":"1",label:a.trans("common.password"),"label-for":"password"}},[t("b-form-input",{attrs:{id:"password",type:"password",state:a.handleErrors("password"),required:0==a.agentid},model:{value:a.data.password,callback:function(e){a.$set(a.data,"password",e)},expression:"data.password"}}),a._v(" "),t("b-form-invalid-feedback",[a._v("\r\n                        "+a._s(a.errors.password)+"\r\n                    ")])],1),a._v(" "),t("b-form-group",{attrs:{"label-cols-md":"1",label:a.trans("common.name"),"label-for":"name"}},[t("b-form-input",{attrs:{id:"name",type:"text",state:a.handleErrors("name"),required:""},model:{value:a.data.name,callback:function(e){a.$set(a.data,"name",e)},expression:"data.name"}}),a._v(" "),t("b-form-invalid-feedback",[a._v("\r\n                        "+a._s(a.errors.name)+"\r\n                    ")])],1),a._v(" "),t("b-form-group",{attrs:{"label-cols-md":"1",label:a.trans("common.currency"),"label-for":"currency"}},[t("b-form-select",{attrs:{id:"currency",state:a.handleErrors("currency"),disabled:0!=a.agentid},model:{value:a.data.currency,callback:function(e){a.$set(a.data,"currency",e)},expression:"data.currency"}},[t("option",{attrs:{value:"",disabled:""}},[a._v(a._s(a.trans("common.select")))]),a._v(" "),a._l(a.currencyOptions,function(e){return t("option",{key:e.id,domProps:{value:e.code}},[a._v(a._s(e.code))])})],2),a._v(" "),t("b-form-invalid-feedback",[a._v("\r\n                        "+a._s(a.errors.currency)+"\r\n                    ")])],1),a._v(" "),t("b-form-group",{attrs:{"label-cols-md":"1",label:a.trans("common.remark"),"label-for":"remark"}},[t("b-form-textarea",{attrs:{id:"remark"},model:{value:a.data.remark,callback:function(e){a.$set(a.data,"remark",e)},expression:"data.remark"}})],1),a._v(" "),t("b-form-group",{attrs:{"label-cols-md":"1",label:a.trans("agents.edit_page.auth_mode")}},[t("div",[t("b-form-radio",{attrs:{value:"1"},model:{value:a.data.auth_mode,callback:function(e){a.$set(a.data,"auth_mode",e)},expression:"data.auth_mode"}},[a._v(a._s(a.trans("agents.edit_page.auth_by_local")))]),a._v(" "),t("b-form-radio",{attrs:{value:"0"},model:{value:a.data.auth_mode,callback:function(e){a.$set(a.data,"auth_mode",e)},expression:"data.auth_mode"}},[a._v(a._s(a.trans("agents.edit_page.auth_by_operator")))])],1),a._v(" "),0==a.data.auth_mode?t("div",{staticClass:"mt-2"},[t("b-form-group",{attrs:{label:a.trans("agents.edit_page.callback_url"),"label-for":"callback-url"}},[t("b-form-input",{attrs:{id:"callback-url",type:"text",state:a.handleErrors("callback"),required:0==a.data.auth_mode},model:{value:a.data.callback,callback:function(e){a.$set(a.data,"callback",e)},expression:"data.callback"}}),a._v(" "),t("b-form-invalid-feedback",[a._v("\r\n                                "+a._s(a.errors.callback)+"\r\n                            ")])],1)],1):a._e()]),a._v(" "),t("b-form-group",{attrs:{"label-cols-md":"1",label:a.trans("agents.edit_page.wallet_mode")}},[t("div",[t("b-form-radio",{attrs:{value:"0"},model:{value:a.data.wallet_mode,callback:function(e){a.$set(a.data,"wallet_mode",e)},expression:"data.wallet_mode"}},[a._v(a._s(a.trans("agents.edit_page.multi_wallet")))]),a._v(" "),t("b-form-radio",{attrs:{value:"1"},model:{value:a.data.wallet_mode,callback:function(e){a.$set(a.data,"wallet_mode",e)},expression:"data.wallet_mode"}},[a._v(a._s(a.trans("agents.edit_page.single_wallet")))])],1),a._v(" "),1==a.data.wallet_mode?t("div",{staticClass:"mt-2 row"},[t("b-form-group",{staticClass:"col-6",attrs:{label:a.trans("agents.edit_page.balance_url"),"label-for":"balance-url"}},[t("b-form-input",{attrs:{id:"balance-url",type:"text",state:a.handleErrors("url_balance"),required:1==a.data.wallet_mode},model:{value:a.data.url_balance,callback:function(e){a.$set(a.data,"url_balance",e)},expression:"data.url_balance"}}),a._v(" "),t("b-form-invalid-feedback",[a._v("\r\n                                "+a._s(a.errors.url_balance)+"\r\n                            ")])],1),a._v(" "),t("b-form-group",{staticClass:"col-6",attrs:{label:a.trans("agents.edit_page.deposit_url"),"label-for":"deposit-url"}},[t("b-form-input",{attrs:{id:"deposit-url",type:"text",state:a.handleErrors("url_deposit"),required:1==a.data.wallet_mode},model:{value:a.data.url_deposit,callback:function(e){a.$set(a.data,"url_deposit",e)},expression:"data.url_deposit"}}),a._v(" "),t("b-form-invalid-feedback",[a._v("\r\n                                "+a._s(a.errors.url_deposit)+"\r\n                            ")])],1),a._v(" "),t("b-form-group",{staticClass:"col-6",attrs:{label:a.trans("agents.edit_page.withdrawal_url"),"label-for":"withdrawal-url"}},[t("b-form-input",{attrs:{id:"withdrawal-url",type:"text",state:a.handleErrors("url_withdrawal"),required:1==a.data.wallet_mode},model:{value:a.data.url_withdrawal,callback:function(e){a.$set(a.data,"url_withdrawal",e)},expression:"data.url_withdrawal"}}),a._v(" "),t("b-form-invalid-feedback",[a._v("\r\n                                "+a._s(a.errors.url_withdrawal)+"\r\n                            ")])],1),a._v(" "),t("b-form-group",{staticClass:"col-6",attrs:{label:a.trans("agents.edit_page.rollback_url"),"label-for":"rollback-url"}},[t("b-form-input",{attrs:{id:"rollback-url",type:"text",state:a.handleErrors("url_rollback"),required:1==a.data.wallet_mode},model:{value:a.data.url_rollback,callback:function(e){a.$set(a.data,"url_rollback",e)},expression:"data.url_rollback"}}),a._v(" "),t("b-form-invalid-feedback",[a._v("\r\n                                "+a._s(a.errors.url_rollback)+"\r\n                            ")])],1)],1):a._e()]),a._v(" "),t("b-form-group",{attrs:{"label-cols-md":"1",label:a.trans("agents.edit_page.provider_config")}},[t("div",{staticClass:"row"},a._l(a.data.configs,function(e){return t("b-form-group",{key:e.id,staticClass:"col-3",attrs:{label:e.name,"label-for":"provider-"+e.code}},[t("b-input-group",[t("b-input-group-prepend",{attrs:{"is-text":""}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.status,expression:"item.status"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.status)?a._i(e.status,null)>-1:e.status},on:{change:function(t){var r=e.status,s=t.target,l=!!s.checked;if(Array.isArray(r)){var o=a._i(r,null);s.checked?o<0&&a.$set(e,"status",r.concat([null])):o>-1&&a.$set(e,"status",r.slice(0,o).concat(r.slice(o+1)))}else a.$set(e,"status",l)}}})]),a._v(" "),t("b-form-input",{attrs:{id:"provider-"+e.code,type:"number",disabled:!e.status,state:a.handleErrors("configs."+e.name+".percent")},model:{value:e.percent,callback:function(t){a.$set(e,"percent",t)},expression:"item.percent"}})],1),a._v(" "),t("b-form-invalid-feedback",[a._v("\r\n                                "+a._s(a.errors["configs."+e.name+".percent"])+"\r\n                            ")])],1)}),1)]),a._v(" "),t("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t("i",{staticClass:"fa fa-search"}),a._v(" "+a._s(a.trans("common.submit")))]),a._v(" "),t("button",{staticClass:"btn btn-danger",on:{click:function(e){return a.cancel()}}},[t("i",{staticClass:"fa fa-ban"}),a._v(" "+a._s(a.trans("common.cancel")))])],1)])])])},[],!1,null,null,null);e.default=n.exports}}]);